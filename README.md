# vgarus-client

CLI-обёртка для заливки сиквенсов в [VGARus](https://genome.crie.ru).

## Установка

## Использование

Список команд можно узнать, запустив `vgarus` без параметров.

Авторизация происходит либо с помощью параметров `--username` и `--password`, либо переменными окружения `VGARUS_USERNAME` и `VGARUS_PASSWORD`, либо файлом с этими переменным (по умолчанию ищется в `~`).

Данные можно можно использовать либо в едином json, либо в паре метаданных в tsv и сиквенсов в fasta. С помощью команд `vgarus combine-package` и `vgarus split-package` можно конвертировать их между собой. 

Внутри клиента используется другое название полей метаданных, чем в API VGARus. Данные можно предоставлять с любыми из этих названий. Json, полученный с помощью `vgarus combine-package` содержит названия из API и пригоден для заливки другими средствами (напр, `curl`). Названия полей в виде шаблона для tsv заголовка можно получить командой `vgarus metadata-template`.

Заливка происходит пакетами, размер которого указывается отдельным параметром в `vgarus upload`. Если во время заливки пакета произошла какая-то ошибка, то это влияет на весь пакет. Полученные в результате успешной заливки VGARus id записываются в файл .result.tsv, а метаданные сиквенсов, заливка которых не удалась, в файл .leftover.tsv. После исправления можно повторить с оставшимися метаданными и исходным fasta.